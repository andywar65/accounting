{% extends 'base.html' %}

{% block title %}{{ website.acro }} | Fatture {{ year|date:"Y" }}{% endblock title %}

{% block extra-head %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
{% endblock extra-head %}

{% block content %}
<ul>
  <li><a href="/fatture/{% now 'Y/m' %}/">Fatture del mese corrente</a></li>
  <li><a href="#charts">Vai ai grafici</a></li>
  <li><a href="/fatture/{{ year|date:"Y" }}/download/">Scarica file CSV</a></li>
</ul>
<div class="row">
  <div class="col col-md-4">
    <h4><strong>Lista delle fatture del {{ year|date:"Y" }}</strong></h4>
  </div>
  <div class="col col-md-8 text-right">
    {% if perms.accounting.add_invoice %}
      {% include "accounting/invoice_add.html" %}
    {% endif %}
  </div>
</div>
<hr class="mb-4">
{% if perms.accounting.view_invoice and all_invoices %}
  {% include "accounting/invoice_loop.html" %}
  <hr class="mb-4" id="charts">
  {% include "accounting/invoice_sum.html" %}
  <hr class="mb-4">
{% else %}
  <div class="col-md-12">
      <p>Non ci sono fatture da mostrare.</p>
  </div>
  <hr class="mb-4">
{% endif %}
<nav aria-label="Page navigation container">
  <ul class="pagination justify-content-center">
    {% if previous_year %}
    <li><a href="/fatture/{{ previous_year|date:"Y" }}" class="page-link">&laquo; PRECEDENTE </a></li>
    {% endif %}
    {% if next_year %}
    <li><a href="/fatture/{{ next_year|date:"Y" }}" class="page-link"> SUCCESSIVO &raquo;</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock content %}
